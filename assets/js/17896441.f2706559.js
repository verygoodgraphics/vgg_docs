"use strict";(self.webpackChunkvgg_docs=self.webpackChunkvgg_docs||[]).push([[7918],{8561:(e,t,r)=>{r.d(t,{Z:()=>k});var n=r(959),i=r(1166),o=r(4077),s=r(4925),a=r(4311);var l=r(16),c=r(1527);const d=n.forwardRef((function(e,t){let{code:r,onChange:i,path:o}=e;const s=(0,n.useRef)(),a=(0,n.useRef)(null),d=(0,n.useRef)(),u=(0,n.useRef)();return(0,n.useImperativeHandle)(t,(()=>({monaco:s,editorRef:d}))),(0,n.useEffect)((()=>()=>{u.current&&window.cancelAnimationFrame(u.current)}),[]),(0,c.jsx)("div",{ref:a,style:{height:"100%",position:"relative"},children:(0,c.jsx)("div",{style:{position:"absolute"},children:(0,c.jsx)(l.ZP,{height:"100%",theme:"IDLE",defaultLanguage:"json",value:r,path:o,onChange:e=>{i(e??"")},onMount:async(e,t)=>{if(a.current){new ResizeObserver((t=>{let[r]=t;u.current=window.requestAnimationFrame((()=>e.layout({width:r.borderBoxSize[0].inlineSize,height:r.borderBoxSize[0].blockSize})))})).observe(a.current),d.current=e,s.current=t,(r=t)&&(r.editor.defineTheme("IDLE",{base:"vs",inherit:!1,rules:[{background:"FFFFFF",token:""},{token:"delimiter",foreground:"999999"},{token:"aaa",foreground:"00ff00"},{foreground:"919191",token:"comment"},{foreground:"00a33f",token:"string"},{foreground:"3b54bf",token:"number"},{foreground:"a535ae",token:"constant.language"},{foreground:"ff5600",token:"keyword"},{foreground:"ff5600",token:"storage"},{foreground:"21439c",token:"entity.name.type"},{foreground:"21439c",token:"entity.name.function"},{foreground:"a535ae",token:"support.function"},{foreground:"a535ae",token:"support.constant"},{foreground:"a535ae",token:"support.type"},{foreground:"a535ae",token:"support.class"},{foreground:"a535ae",token:"support.variable"},{foreground:"000000",background:"990000",token:"invalid"},{foreground:"990000",token:"constant.other.placeholder.py"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#BAD6FD","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}}),r.editor.setTheme("IDLE"))}var r},options:{fontFamily:"iaw-mono-var",fontSize:13,wordWrap:"on",tabSize:2,minimap:{enabled:!1},automaticLayout:!0}})})})}));function u(e){return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,c.jsx)("path",{fill:"currentColor",d:"M21.409 9.353a2.998 2.998 0 0 1 0 5.294L8.597 21.614C6.534 22.736 4 21.276 4 18.968V5.033c0-2.31 2.534-3.769 4.597-2.648l12.812 6.968Z"})})}var f=r(5341),h=r(9014);function x(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.m6)((0,f.Z)(t))}function g(e){let{title:t,activeTab:r,tabs:n,onChange:i,children:o,rightElement:s,noHeader:a=!1}=e;return(0,c.jsxs)("div",{className:"tabs flex h-full w-full flex-col overflow-hidden",children:[!a&&(0,c.jsxs)("div",{className:"tabs-container relative z-[1] flex max-w-[cal(100%_-_15px)] select-none items-center justify-between whitespace-nowrap border border-b-0 border-zinc-200 bg-zinc-50 text-xs",children:[(0,c.jsx)("div",{className:"flex items-center justify-start",children:n.map((e=>(0,c.jsx)("div",{title:e,className:x("tab ml-[-1px] cursor-pointer overflow-hidden text-ellipsis border-x border-zinc-200 bg-zinc-100 px-3 py-2.5 text-zinc-500 hover:bg-zinc-50",{"bg-white font-medium text-zinc-900 hover:bg-white":r===e}),onClick:()=>{i?.(e)},children:e},e)))}),(0,c.jsx)("div",{className:"px-3",children:s})]}),o]})}function m(e){let{path:t,code:r,selectedElement:i,setCode:o,onRun:s}=e;const a=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const e=a.current?.editorRef?.current;if(e&&i?.id){const t=e?.getModel(),n=t?.getPositionAt(r.indexOf(`"name": "${i.id}"`));if(!n)return;e.revealPositionInCenter(n),e?.setSelection({startLineNumber:n?.lineNumber||0,startColumn:n?.column||0,endLineNumber:n?.lineNumber||0,endColumn:n?.column||0})}}),[i]),(0,c.jsx)(g,{title:"Live Editor",activeTab:"design.json",tabs:["design.json"],rightElement:(0,c.jsx)("div",{className:"flex items-center justify-start gap-3",children:(0,c.jsxs)("button",{className:"flex items-center justify-start space-x-1.5 cursor-pointer rounded bg-white px-2 py-1 text-zinc-800 shadow-sm transition-all hover:shadow active:bg-zinc-100 ring-0 border border-zinc-200 border-solid",onClick:()=>s?.(),children:[(0,c.jsx)(u,{className:"h-2.5 w-2.5"}),(0,c.jsx)("span",{className:"font-bold",children:"Run"})]})}),children:(0,c.jsx)("div",{className:"editor flex h-full flex-col overflow-auto border border-zinc-200 bg-white shadow",children:(0,c.jsx)("div",{className:"monaco-container h-full overflow-hidden",children:(0,c.jsx)(d,{code:r,onChange:o,ref:a})})})})}var b=r(4458);function p(e){let{src:t,runtime:r,onSelect:n,width:i,height:o,minHeight:s}=e;return(0,c.jsx)(g,{activeTab:"VGG Render",title:"Live Preview",tabs:["VGG Render"],noHeader:!0,children:(0,c.jsx)("div",{className:"preview-card relative flex flex-1 flex-col overflow-hidden border border-zinc-200 bg-white shadow h-full",children:(0,c.jsx)(b.En,{src:t,runtime:r,editMode:!0,verbose:!0,onSelect:async e=>{const{type:t,data:r}=e;n?.({id:r?.id})},canvasStyle:{width:i??"100%",height:o??"100%",minHeight:s,maxHeight:"100%",top:0,left:0,zIndex:0}})})})}var v=r(961),w=r(5449);const j=e=>{let{className:t,...r}=e;return(0,c.jsx)(w.eh,{className:x("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...r})},y=w.s_,z=e=>{let{withHandle:t,className:r,...n}=e;return(0,c.jsx)(w.OT,{className:x("relative flex w-px items-center justify-center bg-zinc-200 after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",r),...n,children:t&&(0,c.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-zinc-200",children:(0,c.jsx)(v.W1P,{className:"h-2.5 w-2.5"})})})};function N(e){let{tabs:t,onSelect:r}=e;const[i,o]=(0,n.useState)(t[0]);return(0,c.jsx)("div",{className:"flex items-center justify-start flex-wrap gap-2 p-2 bg-zinc-50 border-b border-zinc-200 border-solid border-0",children:t.map(((e,t)=>(0,c.jsx)("button",{className:x("flex items-center justify-start space-x-1.5 cursor-pointer rounded bg-zinc-200/60 px-[14px] py-[6px] text-zinc-500 transition-all hover:bg-zinc-800 hover:text-white ring-0 shadow-none border-none",{"bg-zinc-800 text-white":i.src===e.src}),onClick:()=>{r(e),o(e)},children:(0,c.jsx)("span",{className:"font-bold",children:e.label})},t.toString())))})}const k={...o.Z,Link:i.Z,DarumaPlayer:function(e){let{runtime:t="https://s5.vgg.cool/runtime/latest",src:r,id:i,tabs:o=[]}=e;const[l,d]=(0,n.useState)(""),u=(0,n.useRef)(null),[f,h]=(0,n.useState)(""),g=(0,n.useRef)(""),b=(0,n.useRef)(""),[v,w]=n.useState({id:""}),[k,F]=(0,n.useState)(!1);async function S(e){const t=await async function(e){try{const t=await fetch(e);return await t.arrayBuffer()}catch(t){return console.error(t),null}}(e);if(!t)return a.ZP.error("Failed to fetch zip file");const r=new Uint8Array(t),n=new Int8Array(t);if(u.current=s.GZ(r),!u.current)return;const i=function(e){const t=(new TextDecoder).decode(e);return JSON.parse(t)}(u.current["design.json"]);d(JSON.stringify(i,null,2)),h(n)}return(0,n.useEffect)((()=>(F(window.innerWidth<768),window.addEventListener("resize",(()=>{requestAnimationFrame((()=>{F(window.innerWidth<768)}))})),()=>{window.removeEventListener("resize",(()=>{F(window.innerWidth<768)}))})),[]),(0,n.useEffect)((()=>{!r&&o?.length>0||S(r)}),[r]),(0,n.useEffect)((()=>{o.length>0&&S(o[0].src)}),[o]),(0,n.useEffect)((()=>{b.current=g.current,g.current=l}),[l]),(0,c.jsxs)("div",{className:"border border-solid border-zinc-200 h-full overflow-hidden",children:[(0,c.jsx)(a.x7,{toastOptions:{style:{fontSize:13,borderRadius:6,padding:"2px 4px 2px 12px"}}}),(0,c.jsx)("nav",{className:"top-0 z-10 flex h-[40px] w-full items-center justify-between bg-white px-3 shadow border-0 border-b border-zinc-200 border-solid",children:(0,c.jsxs)("h1",{className:"text-zinc-900 text-sm !mb-0",children:[(0,c.jsx)("span",{className:"font-bold",children:"VGG"})," ",(0,c.jsx)("span",{className:"font-mono font-normal",children:"Playground"})]})}),o.length>0&&(0,c.jsx)(N,{tabs:o,onSelect:e=>S(e.src)}),(0,c.jsx)("div",{className:"box-border flex h-[640px] w-full items-start justify-between",children:f?(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(j,{direction:k?"vertical":"horizontal",className:x({"!flex-col-reverse":k}),children:[(0,c.jsx)(y,{children:(0,c.jsx)("div",{className:"h-[640px]",children:(0,c.jsx)(m,{code:l,setCode:d,onRun:function(){if(!u.current)return;if(g.current===b.current)return;const e=(new TextEncoder).encode(g.current);u.current["design.json"]=e;const t=s.Xo(u.current,{});new Int8Array(t.buffer)!==f&&h(new Int8Array(t.buffer))},selectedElement:v,path:i},i)})}),(0,c.jsx)(z,{withHandle:!0}),(0,c.jsx)(y,{children:(0,c.jsx)("div",{className:"h-[640px]",children:(0,c.jsx)(p,{runtime:t,src:f,onSelect:w,minHeight:k?300:640})})})]})}):(0,c.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,c.jsx)("p",{children:"Loading..."})})})]})}}}}]);