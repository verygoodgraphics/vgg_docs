"use strict";(self.webpackChunkvgg_docs=self.webpackChunkvgg_docs||[]).push([[7918],{3929:(e,t,n)=>{n.d(t,{Z:()=>W});var r=n(959),s=n(3556),a=n(6649),l=n(4925),i=n(4311),o=n(1696);var c=n(16),d=n(1527);const u=r.forwardRef((function(e,t){let{code:n,onChange:s,path:a}=e;const l=(0,r.useRef)(),i=(0,r.useRef)(null),o=(0,r.useRef)(),u=(0,r.useRef)();return(0,r.useImperativeHandle)(t,(()=>({monaco:l,editorRef:o}))),(0,r.useEffect)((()=>()=>{u.current&&window.cancelAnimationFrame(u.current)}),[]),(0,d.jsx)("div",{ref:i,style:{height:"100%",position:"relative"},children:(0,d.jsx)("div",{className:"absolute w-full h-full",children:(0,d.jsx)(c.ZP,{height:"100%",theme:"IDLE",defaultLanguage:"json",value:n,path:a,onChange:e=>{s(e??"")},onMount:async(e,t)=>{if(i.current){new ResizeObserver((t=>{let[n]=t;u.current=window.requestAnimationFrame((()=>e.layout({width:n.borderBoxSize[0].inlineSize,height:n.borderBoxSize[0].blockSize})))})).observe(i.current),o.current=e,l.current=t,(n=t)&&(n.editor.defineTheme("IDLE",{base:"vs",inherit:!1,rules:[{background:"FFFFFF",token:""},{token:"delimiter",foreground:"999999"},{token:"aaa",foreground:"00ff00"},{foreground:"919191",token:"comment"},{foreground:"00a33f",token:"string"},{foreground:"3b54bf",token:"number"},{foreground:"a535ae",token:"constant.language"},{foreground:"ff5600",token:"keyword"},{foreground:"ff5600",token:"storage"},{foreground:"21439c",token:"entity.name.type"},{foreground:"21439c",token:"entity.name.function"},{foreground:"a535ae",token:"support.function"},{foreground:"a535ae",token:"support.constant"},{foreground:"a535ae",token:"support.type"},{foreground:"a535ae",token:"support.class"},{foreground:"a535ae",token:"support.variable"},{foreground:"000000",background:"990000",token:"invalid"},{foreground:"990000",token:"constant.other.placeholder.py"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#BAD6FD","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}}),n.editor.setTheme("IDLE"))}var n},options:{fontFamily:"iaw-mono-var",fontSize:13,wordWrap:"on",tabSize:2,minimap:{enabled:!1},automaticLayout:!0}})})})}));function f(e){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,d.jsx)("path",{fill:"currentColor",d:"M21.409 9.353a2.998 2.998 0 0 1 0 5.294L8.597 21.614C6.534 22.736 4 21.276 4 18.968V5.033c0-2.31 2.534-3.769 4.597-2.648l12.812 6.968Z"})})}var x=n(5341),h=n(9014);function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,h.m6)((0,x.Z)(t))}function p(e){let{title:t,activeTab:n,tabs:r,onChange:s,children:a,rightElement:l,noHeader:i=!1}=e;return(0,d.jsxs)("div",{className:"tabs flex h-full w-full flex-col overflow-hidden",children:[!i&&(0,d.jsxs)("div",{className:"tabs-container relative z-[1] flex max-w-[cal(100%_-_15px)] select-none items-center justify-between whitespace-nowrap border border-b-0 border-zinc-200 bg-zinc-50 text-xs",children:[(0,d.jsx)("div",{className:"flex items-center justify-start",children:r.map((e=>(0,d.jsx)("div",{title:e,className:m("tab ml-[-1px] cursor-pointer overflow-hidden text-ellipsis border-x border-zinc-200 bg-zinc-100 px-3 py-2.5 text-zinc-400 hover:bg-zinc-50 transition-all",{"bg-white font-bold text-zinc-900 hover:bg-white":n===e}),onClick:()=>{s?.(e)},children:e},e)))}),(0,d.jsx)("div",{className:"px-3",children:l})]}),a]})}function g(e){let{path:t,code:n,selectedElement:s,activeLine:a,lineNumberMatchType:l,tabs:i,currentTab:c,setCurrentTab:x,setCode:h,onRun:m}=e;const g=(0,r.useRef)(null),b=(0,r.useRef)("");return(0,r.useEffect)((()=>{const e=g.current?.editorRef?.current;e?.setScrollPosition({scrollTop:0}),e?.focus()}),[c]),(0,r.useEffect)((()=>{b.current=n}),[n]),(0,r.useEffect)((()=>{const e=g.current?.editorRef?.current;if(e&&s?.id){const t=e?.getModel();let n=t?.findMatches(`"${s.id}"`,!1,!0,!1,null,!1);if(n&&n.length>0){let t=n[0].range.startLineNumber;e.revealLineInCenter(t),e.setPosition({lineNumber:t,column:0})}}}),[s]),(0,r.useEffect)((()=>{if(!a?.[0])return;const[e,t]=a,n=(0,o.j)({json:JSON.parse(b.current),path:e,resultType:"all"});if(n.length>0){const e=g.current?.editorRef?.current,r="range"===l?function(e,n){const r=e.split("\n"),s=n.filter((e=>!!e&&"$"!==e&&"string"==typeof e));for(let a=0;a<r.length;a++){const e=Number(s[0]);if(isNaN(e)){if(r[a].trim().startsWith(`"${s[0]}":`)){if(1===s.length){if(-1===t)return a+1;if(t-6<a&&a<t+4)return a+1;continue}s.shift()}}else{if(!r[a].trim().startsWith(`"${s[1]}":`))continue;if(e>0)s[0]=String(e-1);else{if(2===s.length){if(-1===t)return a+1;if(t-6<a&&a<t+4)return a+1;continue}s.splice(0,2)}}}return-1}(b.current,n[0].pointer.split("/")):t;e?.revealLineInCenter(r),e?.setPosition({lineNumber:r,column:0})}}),[a]),(0,d.jsx)(p,{title:"Live Editor",activeTab:c,tabs:i||["design.json"],onChange:e=>x(e),rightElement:(0,d.jsx)("div",{className:"flex items-center justify-start gap-3",children:(0,d.jsxs)("button",{className:"flex items-center justify-start space-x-1.5 cursor-pointer rounded bg-white px-2 py-1 text-zinc-800 shadow-sm transition-all hover:shadow active:bg-zinc-100 ring-0 border border-zinc-200 border-solid",onClick:()=>m?.(),children:[(0,d.jsx)(f,{className:"h-2.5 w-2.5"}),(0,d.jsx)("span",{className:"font-bold",children:"Run"})]})}),children:(0,d.jsx)("div",{className:"editor flex h-full flex-col overflow-auto border border-zinc-200 bg-white shadow",children:(0,d.jsx)("div",{className:"monaco-container h-full overflow-hidden",children:n?(0,d.jsx)(u,{code:n,onChange:h,ref:g}):(0,d.jsx)("div",{className:"flex items-center justify-center h-full text-zinc-400",children:"No code to display"})})})})}var b=n(1968),v=n(961),j=n(9826);const w=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,d.jsxs)(j.fC,{ref:t,className:m("relative flex w-full touch-none select-none items-center",n),...r,children:[(0,d.jsx)(j.fQ,{className:"relative h-[5px] w-full grow overflow-hidden rounded-full bg-black/[0.08]",children:(0,d.jsx)(j.e6,{className:"absolute h-full bg-black/80"})}),(0,d.jsx)(j.bU,{className:"block h-[14px] w-[14px] rounded-full border border-zinc-200 border-solid bg-white shadow transition-colors focus-visible:outline-none focus-visible:ring-none disabled:pointer-events-none disabled:opacity-50"})]})}));w.displayName=j.fC.displayName;var N=n(9459);const y=N.fC,z=(N.ZA,N.B4),k=r.forwardRef(((e,t)=>{let{className:n,children:r,...s}=e;return(0,d.jsxs)(N.xz,{ref:t,className:m("flex h-6 w-full items-center justify-between rounded-md border-solid border border-zinc-200 ring-0 bg-transparent px-2 py-1 text-xs shadow-sm outline-none placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50",n),...s,children:[r,(0,d.jsx)(N.JO,{asChild:!0,children:(0,d.jsx)(v.jnn,{className:"h-4 w-4 opacity-50"})})]})}));k.displayName=N.xz.displayName;const C=r.forwardRef(((e,t)=>{let{className:n,children:r,position:s="popper",...a}=e;return(0,d.jsx)(N.h_,{children:(0,d.jsx)(N.VY,{ref:t,className:m("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:s,...a,children:(0,d.jsx)(N.l_,{className:m("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})}));C.displayName=N.VY.displayName;r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,d.jsx)(N.__,{ref:t,className:m("px-2 py-1.5 text-sm font-semibold",n),...r})})).displayName=N.__.displayName;const S=r.forwardRef(((e,t)=>{let{className:n,children:r,...s}=e;return(0,d.jsxs)(N.ck,{ref:t,className:m("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-xs outline-none focus:bg-zinc-100 focus:text-zinc-800 text-zinc-600 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...s,children:[(0,d.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(N.wU,{children:(0,d.jsx)(v.nQG,{className:"h-4 w-4"})})}),(0,d.jsx)(N.eT,{children:r})]})}));S.displayName=N.ck.displayName;r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,d.jsx)(N.Z0,{ref:t,className:m("-mx-1 my-1 h-px bg-muted",n),...r})})).displayName=N.Z0.displayName;var R=n(5373);const T=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,d.jsx)(R.fC,{className:m("peer inline-flex h-[18px] p-0 w-[34px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-black/80 data-[state=unchecked]:bg-input",n),...r,ref:t,children:(0,d.jsx)(R.bU,{className:m("pointer-events-none block h-[14px] w-[14px] rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}));T.displayName=R.fC.displayName;var F=n(818);function E(e){let{label:t,thumbLabels:n,className:r,...s}=e;return(0,d.jsx)(F.iR,{...s,className:m("w-full",r),children:(0,d.jsx)(F.Uj,{className:"relative w-full h-7",children:e=>{let{state:t}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"absolute h-[5px] top-[50%] translate-y-[-50%] w-full rounded-full bg-black/[0.08]"}),t.values.map(((e,t)=>(0,d.jsx)(F.gs,{className:"h-[14px] w-[14px] top-[50%] rounded-full border border-solid border-zinc-200 bg-white transition dragging:shadow-md shadow outline-none focus-visible:ring-2 ring-black",index:t,"aria-label":n?.[t]},t)))]})}})})}function L(e){let{label:t,thumbLabels:n,className:s,defaultValue:a,thumbColors:l,...i}=e;const[o]=(0,r.useState)((()=>a?.map((e=>e.position))??[]));return(0,d.jsx)(F.iR,{...i,defaultValue:o,className:m("w-full",s),children:(0,d.jsx)(F.Uj,{className:"relative w-[calc(100%_-_8px)] h-7",children:e=>{let{state:t}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"absolute h-1 top-[50%] translate-y-[-50%] w-full rounded-full bg-black/[0.08]"}),t.values.map(((e,t)=>(0,d.jsxs)(F.gs,{className:"h-[14px] flex relative justify-center items-center w-[14px] top-[50%] rounded-sm border border-solid border-zinc-200 bg-white transition dragging:shadow-md shadow outline-none focus-visible:ring-2 ring-black",index:t,"aria-label":n?.[t],children:[(0,d.jsx)("div",{className:"h-[10px] w-[10px] rounded-sm z-20",style:{backgroundColor:l?.[t]??"inherit"}}),(0,d.jsx)("div",{className:"absolute h-[10px] w-[10px] top-[1px] left-[1px] rounded-sm overflow-hidden z-10",style:{backgroundColor:"#ffffff",opacity:.8,backgroundImage:"repeating-linear-gradient(45deg, #d7d7d7 25%, transparent 25%, transparent 75%, #d7d7d7 75%, #d7d7d7), repeating-linear-gradient(45deg, #d7d7d7 25%, #ffffff 25%, #ffffff 75%, #d7d7d7 75%, #d7d7d7)",backgroundPosition:"0 0, 5px 5px",backgroundSize:"10px 10px"}})]},t)))]})}})})}function V(e){let{sliderLabels:t,value:n=[],defaultValue:s=[],onChange:a,min:l=0,max:i=100,step:o=1}=e;const c=r.useRef(s);return(0,d.jsx)("div",{className:"w-full flex flex-col gap-y-2",children:t?.map(((e,t)=>(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e}),(0,d.jsx)(w,{defaultValue:[s?.[t]],min:l,max:i,step:o,onValueChange:e=>{c.current[t]=e[0],a?.(c.current)}})]},t.toString())))})}const B=(e,t)=>{let n;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];clearTimeout(n),n=setTimeout((()=>{e(...s)}),t)}};function P(e){let{className:t,code:n,config:s,onChange:a}=e;const[l,i]=(0,r.useReducer)((e=>!e),!1),o=r.useRef(n),c=r.useRef(null);return(0,r.useEffect)((()=>{o.current=n}),[n]),s&&0!==s.length?(0,d.jsxs)("div",{className:m("border rounded-lg px-2 py-1.5 border-zinc-200 border-solid min-w-[280px] bg-white shadow-sm z-10",t),children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-2",onClick:i,children:[(0,d.jsx)("h2",{className:"text-[13px] text-zinc-600 font-bold mb-0",children:"Controls"}),(0,d.jsx)(v.v4q,{className:"w-[14px] h-[14px] text-zinc-400"})]}),(0,d.jsx)("div",{className:m("flex flex-col gap-y-2",{height:l?"0":"auto"}),children:s.map(((e,t)=>{const n=B(((t,n)=>{const{transformedValue:r,updatedCode:s}=e.onBeforeChange?.(t,o.current)??{},l=a?.({valuePath:e.valuePath,value:r??t,lineNumber:n??e.lineNumber,lineNumberMatchType:e.lineNumberMatchType,code:s});o.current=l??o.current}),100);switch(e.controlType){case"slider":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e.label}),(0,d.jsx)(w,{defaultValue:[e.value],min:e.min,max:e.max,step:e.step||1,onValueChange:e=>{n(e[0])}})]},t.toString());case"select":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e.label}),(0,d.jsxs)(y,{defaultValue:e.value,onValueChange:n,children:[(0,d.jsx)(k,{className:"w-[120px]",children:(0,d.jsx)(z,{placeholder:e.options?.[0].label})}),(0,d.jsx)(C,{children:e.options?.map(((e,t)=>(0,d.jsx)(S,{value:e.value,children:e.label},t.toString())))})]})]},t.toString());case"input":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium",children:e.label}),(0,d.jsx)("input",{type:"text",value:e.value,onChange:t=>{e.onBeforeChange?.(t.target.value)}})]},t.toString());case"color":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e.label}),(0,d.jsx)("input",{type:"color",value:e.value,onChange:t=>{e.onBeforeChange?.(t.target.value)}})]},t.toString());case"checkbox":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e.label}),(0,d.jsx)("input",{type:"checkbox",checked:e.value,onChange:t=>{e.onBeforeChange?.(t.target.checked)}})]},t.toString());case"button":return(0,d.jsx)("div",{className:"flex items-center gap-x-2",children:(0,d.jsx)("button",{onClick:()=>{e.onBeforeChange?.(e.value)},children:e.label})},t.toString());case"radio":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e.label}),e.options?.map(((t,n)=>(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"radio",value:t.value,checked:e.value===t,onChange:t=>{e.onBeforeChange?.(t.target.value)}}),(0,d.jsx)("label",{children:t.label})]},n.toString())))]},t.toString());case"switch":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e.label}),(0,d.jsx)(T,{onCheckedChange:n,defaultChecked:e.value})]},t.toString());case"range-slider":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e.label}),(0,d.jsx)(E,{defaultValue:[30,60],thumbLabels:["start","end"]})]},t.toString());case"gradient-slider":return(0,d.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,d.jsx)("label",{className:"text-xs text-zinc-600 font-medium flex-none w-[50%]",children:e.label}),(0,d.jsx)(L,{maxValue:e.max,minValue:e.min,step:e.step,defaultValue:e.value,thumbColors:e.value.map((e=>`rgba(${255*e.color.red},${255*e.color.green},${255*e.color.blue},${e.color.alpha})`)),onChange:t=>{let r=0;const s=(c.current??e.value).map(((e,n)=>(t[n]!==e.position&&(r=n),{...e,position:t[n]})));c.current=s,n(s,e.lineNumbers?.[r])}})]},t.toString());case"multi-slider":return(0,d.jsx)("div",{className:"flex items-center gap-x-2",children:(0,d.jsx)(V,{sliderLabels:e.valueLabels??[],defaultValue:e.value,onChange:e=>{n(e)},min:e.min,max:e.max,step:e.step||1})},t.toString());default:return null}}))})]}):null}function _(e){let{code:t,src:n,runtime:r,onSelect:s,width:a,height:l,controlsConfig:i,onControlChange:o}=e;return(0,d.jsx)(p,{activeTab:"VGG Render",title:"Live Preview",tabs:["VGG Render"],noHeader:!0,children:(0,d.jsxs)("div",{className:"preview-card relative flex flex-1 flex-col overflow-hidden border border-zinc-200 bg-white shadow h-full",children:[(0,d.jsx)(b.En,{src:n,runtime:r,editMode:!0,verbose:!0,onSelect:async e=>{const{type:t,data:n}=e;console.log("onSelect",n),s?.({id:n?.id})},className:"h-full w-full flex justify-center items-center",canvasStyle:{width:a??"100%",height:l??"100%",top:0,left:0,zIndex:0}}),(0,d.jsx)(P,{className:"absolute top-4 right-4",code:t,config:i,onChange:o})]})})}var O=n(5449);const Z=e=>{let{className:t,...n}=e;return(0,d.jsx)(O.eh,{className:m("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},A=O.s_,I=e=>{let{withHandle:t,className:n,...r}=e;return(0,d.jsx)(O.OT,{className:m("relative flex w-px items-center justify-center bg-zinc-200 after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...r,children:t&&(0,d.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-zinc-200",children:(0,d.jsx)(v.W1P,{className:"h-2.5 w-2.5"})})})};function M(){return(0,d.jsxs)("div",{className:"loading-spinner",children:[(0,d.jsx)("div",{id:"square1"}),(0,d.jsx)("div",{id:"square2"}),(0,d.jsx)("div",{id:"square3"}),(0,d.jsx)("div",{id:"square4"}),(0,d.jsx)("div",{id:"square5"})]})}function q(e){const t=(new TextDecoder).decode(e);return JSON.parse(t)}function G(e){let{tabs:t,onSelect:n}=e;const[s,a]=(0,r.useState)(t[0]);return(0,d.jsx)("div",{className:"flex items-center justify-start flex-wrap gap-2 p-2 bg-zinc-50 border-b border-zinc-200 border-solid border-0",children:t.map(((e,t)=>(0,d.jsx)("button",{className:m("flex items-center justify-start space-x-1.5 cursor-pointer rounded bg-zinc-200/60 px-[14px] py-[6px] text-zinc-500 transition-all hover:bg-zinc-800 hover:text-white ring-0 shadow-none border-none",{"bg-zinc-800 text-white":s.src===e.src}),onClick:()=>{n(e),a(e)},children:(0,d.jsx)("span",{className:"font-bold",children:e.label})},t.toString())))})}const W={...a.Z,Link:s.Z,DarumaPlayer:function(e){let{runtime:t="/runtime",src:n,id:s,tabs:a=[],codeTabs:c=["design.json"],activeCodeTab:u="design.json",controlsConfig:f}=e;const[x,h]=(0,r.useState)({}),[p,b]=(0,r.useState)(""),v=(0,r.useRef)(null),[j,w]=(0,r.useState)(""),[N,y]=r.useState({id:""}),[z,k]=r.useState(["",-1]),[C,S]=r.useState("range"),[R,T]=(0,r.useState)(!1),[F]=(0,r.useState)((()=>c)),[E,L]=(0,r.useState)(u),V=(0,r.useRef)(["",""]),B=(0,r.useRef)({}),[P,O]=(0,r.useState)(!1),[W,$]=(0,r.useState)("");async function D(e){const t=await async function(e){try{const t=await fetch(e);return await t.arrayBuffer()}catch(t){return console.log(t),null}}(e);if(!t)return i.ZP.error("Failed to fetch zip file"),void O(!0);try{const e=new Uint8Array(t),n=new Int8Array(t);if(v.current=l.GZ(e),!v.current)return;const r=q(v.current[E]),s=JSON.stringify(r,null,2);h((e=>({...e,[E]:s}))),w(n),$(s)}catch(n){console.log(n),O(!0)}}function J(){if(!v.current)return;let e=!1;for(const[r,s]of Object.entries(B.current))v.current[r]!==B.current[r]&&(e=!0);if(!e)return;for(const[r,s]of Object.entries(B.current))v.current[r]=(new TextEncoder).encode(B.current[r]);const t=l.Xo(v.current,{}),n=new Int8Array(t.buffer);n!==j&&w(n)}return(0,r.useEffect)((()=>(T(window.innerWidth<768),window.addEventListener("resize",(()=>{requestAnimationFrame((()=>{T(window.innerWidth<768)}))})),()=>{window.removeEventListener("resize",(()=>{T(window.innerWidth<768)}))})),[]),(0,r.useEffect)((()=>{!n&&a?.length>0||D(n)}),[n]),(0,r.useEffect)((()=>{a.length>0&&D(a[0].src)}),[a]),(0,r.useEffect)((()=>{if(!v.current)return;const e=q(v.current[E]),t={[E]:JSON.stringify(e,null,2)};h((e=>({...e,...t}))),V.current=[E,t[E]]}),[E]),(0,r.useEffect)((()=>{const e=V.current[0]||u,t=x[e];V.current=[e,t],B.current={...B.current,[e]:t},b(t)}),[x]),(0,d.jsxs)("div",{className:"border border-solid border-zinc-200 h-full overflow-hidden",children:[(0,d.jsx)(i.x7,{toastOptions:{style:{fontSize:13,borderRadius:6,padding:"2px 4px 2px 12px"}}}),(0,d.jsx)("nav",{className:"top-0 z-10 flex h-[40px] w-full items-center justify-between bg-white px-3 shadow border-0 border-b border-zinc-200 border-solid",children:(0,d.jsxs)("h1",{className:"text-zinc-900 text-sm !mb-0",children:[(0,d.jsx)("span",{className:"font-bold",children:"VGG"})," ",(0,d.jsx)("span",{className:"font-mono font-normal",children:"Playground"})]})}),a.length>0&&(0,d.jsx)(G,{tabs:a,onSelect:e=>D(e.src)}),(0,d.jsx)("div",{className:"box-border flex h-[640px] w-full items-start justify-between",children:j?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(Z,{direction:R?"vertical":"horizontal",className:m({"!flex-col-reverse":R}),children:[(0,d.jsx)(A,{minSize:30,children:(0,d.jsx)("div",{className:R?"h-[320px]":"h-[640px]",children:(0,d.jsx)(g,{code:p,setCode:function(e){const t=V.current[0];h((n=>({...n,[t]:e})))},onRun:J,selectedElement:N,activeLine:z,lineNumberMatchType:C,path:s,tabs:F,currentTab:E,setCurrentTab:L},s)})}),(0,d.jsx)(I,{withHandle:!0}),(0,d.jsx)(A,{minSize:40,children:(0,d.jsx)("div",{className:R?"h-[320px]":"h-[640px]",children:(0,d.jsx)(_,{runtime:t,src:j,onSelect:y,height:R?300:640,width:R?300:640,controlsConfig:f,code:W,onControlChange:e=>{let{code:t,valuePath:n,value:r,lineNumber:s,lineNumberMatchType:a}=e;const[l,i]=V.current,c=t??i,d=JSON.parse(c);(0,o.j)({json:d,path:n,resultType:"all"}).forEach((e=>{let{parent:t,parentProperty:n}=e;t[n]=r}));const u=JSON.stringify(d,null,2);return h((e=>({...e,[l]:u}))),a&&S(a),setTimeout((()=>{k([n,s??-1]),J(),setTimeout((()=>{k(["",-1]),S("range")}))}),100),u}})})})]})}):P?(0,d.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,d.jsx)("p",{className:"text-red-500 bg-red-50 px-2.5 py-0.5 rounded-lg",children:"Failed to load source"})}):(0,d.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,d.jsx)(M,{})})})]})}}}}]);